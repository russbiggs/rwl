"use strict";var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],a=!0,s=!1,n=void 0;try{for(var i,l=r[Symbol.iterator]();!(a=(i=l.next()).done)&&(t.push(i.value),!e||t.length!==e);a=!0);}catch(r){s=!0,n=r}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}var rwl=function(){function r(r){var e=r.slice(0,-2),t=r.slice(-2),a=parseInt(e)+.01*parseFloat(t);return parseFloat(a.toFixed(2))}return function(e){var t={},a=e.split("\n").slice(0,3);t.metadata=function(e){var t={},a=e;t.siteId=a[0].slice(0,6).replace(/\s*/g,"");var s=a[0].slice(9).match(/(\w+)/g);t.siteName=s.slice(0,-1).join(" "),t.speciesCode=s.slice(-1)[0];var n=a[1].split(/\s{2,}/);t.state=n[1].match(/2\s([A-Za-z\s]+)/)[1],t.species=a[1].match(/\d+[A-Za-z\s]+\s\s+([A-Za-z\s\-\']+)\b\s\s+\d/)[1];var i=a[1].match(/(\d+)M/)[1];t.elevation=i;var l=a[1].match(/\s(\d+\-*\s*\d+)\s/)[1];l.indexOf(" ")>-1&&(l=l.split(/\s+/)),l.indexOf("-")>-1&&(l=l.split("-"));var o=r(l[1]),c=r(l[0]);t.location={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[o,c]}};var u,p=a[1].match(/(\d{4})\s*(\d{4})\s*$/).slice(1),d=_slicedToArray(p,2),f=d[0],v=d[1];return t.firstYear=parseInt(f),t.lastYear=parseInt(v),t.leadInvestigator=(u=a[2],u.match(/\w+\s+3\s(.*)/)[1].split(/(\s\band\b\s)|\s{2,}|\,\s+/).filter(function(r){return!!r}))[0],t}(a);var s=e.split("\n").slice(3);return t.samples=function(r){var e=r,t=[],a=!0,s=!1,n=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var o=i.value,c={},u=o.split(/\s+/g);c.sampleId=u[0];for(var p=u.slice(1),d=parseInt(p.shift()),f=[],v=0;v<p.length;v++){var m={};m.year=d+v,m.width=parseInt(p[v]);var y=[999,-9999];console.log(y.indexOf(m.width)),-1==y.indexOf(m.width)&&f.push(m)}c.measurements=f,t.push(c)}}catch(r){s=!0,n=r}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}var h=t.reduce(function(r,e){var t;return r[e.sampleId]=r[e.sampleId]||[],(t=r[e.sampleId]).push.apply(t,_toConsumableArray(e.measurements)),r},{}),A=[];for(var I in h)A.push({sampleId:I,measurements:h[I]});return A}(s),JSON.stringify(t)}}();
