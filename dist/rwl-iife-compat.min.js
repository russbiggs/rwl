"use strict";var _slicedToArray=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var e=[],a=!0,s=!1,n=void 0;try{for(var i,l=r[Symbol.iterator]();!(a=(i=l.next()).done)&&(e.push(i.value),!t||e.length!==t);a=!0);}catch(r){s=!0,n=r}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _toConsumableArray(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}var rwl=function(){function r(r){var t=r.slice(0,-2),e=r.slice(-2),a=parseInt(t)+.01*parseFloat(e);return parseFloat(a.toFixed(2))}return function(t){var e={},a=t.split("\n").slice(0,3);e.metadata=function(t){var e={},a=t;e.siteId=a[0].slice(0,6).replace(/\s*/g,"");var s=a[0].slice(9).match(/(\w+)/g);e.siteName=s.slice(0,-1).join(" "),e.speciesCode=s.slice(-1)[0];var n=a[1].split(/\s{2,}/);e.state=n[1].match(/2\s([A-Za-z\s]+)/)[1],e.species=a[1].match(/\d+[A-Za-z\s]+\s\s+([A-Za-z\s\-\']+)\b\s\s+\d/)[1];var i=a[1].match(/\d+M/)[0].match(/\d+/);e.elevation=i[0];var l=a[1].match(/\s(\d+\-*\s*\d+)\s/)[1];l.indexOf(" ")>-1&&(l=l.split(/\s+/)),l.indexOf("-")>-1&&(l=l.split("-"));var o=r(l[1]),c=r(l[0]);e.location={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[o,c]}};var u,p=a[1].match(/(\d{4})\s*(\d{4})\s*$/).slice(1),d=_slicedToArray(p,2),f=d[0],m=d[1];return e.firstYear=parseInt(f),e.lastYear=parseInt(m),e.leadInvestigator=(u=a[2],u.match(/\w+\s+3\s(.*)/)[1].split(/(\s\band\b\s)|\s{2,}|\,\s+/).filter(function(r){return!!r}))[0],e}(a);var s=t.split("\n").slice(3);return e.samples=function(r){var t=r,e=[],a=!0,s=!1,n=void 0;try{for(var i,l=t[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var o=i.value,c={},u=o.split(/\s+/g);c.sampleId=u[0];for(var p=u.slice(1),d=parseInt(p.shift()),f=[],m=0;m<p.length;m++){var v={};v.year=d+m,v.width=parseInt(p[m]),f.push(v)}c.measurements=f,e.push(c)}}catch(r){s=!0,n=r}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}var y=e.reduce(function(r,t){var e;return r[t.sampleId]=r[t.sampleId]||[],(e=r[t.sampleId]).push.apply(e,_toConsumableArray(t.measurements)),r},{}),h=[];for(var A in y)h.push({sampleId:A,measurements:y[A]});return h}(s),JSON.stringify(e)}}();
